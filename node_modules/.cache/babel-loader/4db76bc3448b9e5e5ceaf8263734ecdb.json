{"ast":null,"code":"var _jsxFileName = \"/Users/d1ak8m5/gitprojects/shopping-cart-1/src/App.js\";\nimport React, { Component } from \"react\";\nimport './App.css';\nimport CartItems from './components/CartItems';\nimport CartHeader from './components/CartHeader';\nimport CartFooter from './components/CartFooter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      products: [],\n      cartItemList: [{\n        id: 0,\n        product: {},\n        quantity: 0\n      }]\n    };\n    this.total = 0;\n\n    this.getTotal = cart => {\n      /* const total = cart.reduce((pv, cv) => { \n          pv += (parseInt(cv.product.priceInCents) * parseInt(cv.quantity))\n            }, 0);*/\n      var sum = 0;\n\n      for (var i = 0; i < cart.length; i++) {\n        sum += parseInt(cart[i].product.priceInCents) * parseInt(cart[i].quantity);\n      }\n\n      this.total = sum;\n    };\n\n    this.addItemToList = product => {\n      console.log(\"i have received\", product);\n      var check = this.state.cartItemList.some(item => item.product.name == product.product.name);\n\n      if (check) {\n        var newList = this.state.cartItemList;\n        newList.map(item => {\n          if (product.product.name == item.product.name) {\n            console.log(\"i am true\");\n            var newQuantity = parseInt(item.quantity) + parseInt(product.quantity);\n            item.quantity = newQuantity;\n          }\n        });\n        this.setState(prevState => ({\n          cartItemList: prevState.cartItemList = newList\n        }));\n      } else {\n        this.setState(prevState => ({\n          cartItemList: prevState.cartItemList.concat(product)\n        }));\n      }\n\n      this.getTotal(this.state.cartItemList);\n    };\n  }\n\n  async componentDidMount() {\n    const productsResponse = await fetch(\"http://localhost:8082/api/products\");\n    const productsJson = await productsResponse.json();\n    const itemsResponse = await fetch(\"http://localhost:8082/api/items\");\n    const itemsJson = await itemsResponse.json();\n    this.setState({ ...this.state,\n      products: productsJson\n    });\n    itemsJson.map((item, i) => {\n      item.key = i;\n      item.product = productsJson.find(product => product.id === item.product_id);\n    });\n    this.setState({ ...this.state,\n      cartItemList: itemsJson\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CartHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CartItems, {\n        products: this.state,\n        addItemToList: this.addItemToList,\n        total: this.total\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CartFooter, {\n        copyright: \"2016\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/d1ak8m5/gitprojects/shopping-cart-1/src/App.js"],"names":["React","Component","CartItems","CartHeader","CartFooter","App","state","products","cartItemList","id","product","quantity","total","getTotal","cart","sum","i","length","parseInt","priceInCents","addItemToList","console","log","check","some","item","name","newList","map","newQuantity","setState","prevState","concat","componentDidMount","productsResponse","fetch","productsJson","json","itemsResponse","itemsJson","key","find","product_id","render"],"mappings":"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","sourcesContent":["\nimport React, { Component } from \"react\";\nimport './App.css';\nimport CartItems from './components/CartItems';\nimport CartHeader from './components/CartHeader';\nimport CartFooter from './components/CartFooter';\n\n\n\nclass App extends Component {\n  state = {\n    products:\n      [\n\n      ],\n    cartItemList:\n      [\n        {id: 0, product:{}, quantity: 0}\n      ]\n  }\n\n  async componentDidMount() {\n    const productsResponse = await fetch(\"http://localhost:8082/api/products\");\n    const productsJson = await productsResponse.json();\n    const itemsResponse = await fetch(\"http://localhost:8082/api/items\");\n    const itemsJson = await itemsResponse.json();\n    this.setState({\n      ...this.state,\n      products: productsJson,\n    });\n    \n\n    itemsJson.map((item, i) => {\n      item.key= i;\n      item.product = productsJson.find(\n        (product) => product.id === item.product_id\n      );\n    });\n\n    this.setState({\n      ...this.state,\n      cartItemList: itemsJson,\n    });\n\n  }\n\n  total = 0;\n\n  getTotal = (cart) => {\n    /* const total = cart.reduce((pv, cv) => { \n        pv += (parseInt(cv.product.priceInCents) * parseInt(cv.quantity))\n          }, 0);*/\n    var sum = 0;\n    for (var i = 0; i < cart.length; i++) {\n      sum += parseInt(cart[i].product.priceInCents) * parseInt(cart[i].quantity)\n\n    }\n\n    this.total = sum;\n\n  }\n\n  addItemToList = (product) => {\n    console.log(\"i have received\", product)\n    var check = this.state.cartItemList.some(item => item.product.name == product.product.name)\n\n    if (check) {\n      var newList = this.state.cartItemList\n      newList.map(item => {\n        if (product.product.name == item.product.name) {\n          console.log(\"i am true\")\n\n          var newQuantity = parseInt(item.quantity) + parseInt(product.quantity)\n          item.quantity = newQuantity\n\n        }\n      });\n      this.setState(prevState => ({ cartItemList: prevState.cartItemList = newList }))\n\n    } else {\n      this.setState(prevState => ({ cartItemList: prevState.cartItemList.concat(product) }))\n    }\n\n    this.getTotal(this.state.cartItemList);\n  }\n\n  render() {\n    return (\n      <div>\n        <CartHeader />\n        <CartItems products={this.state} addItemToList={this.addItemToList} total={this.total} />\n        <CartFooter copyright=\"2016\" />\n\n      </div>\n    )\n  };\n\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}